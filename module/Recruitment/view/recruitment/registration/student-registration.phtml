<section class="content-header">
    <h1>Inscrição</h1>
</section>

<section class="content">
    <?php echo $this->message; ?>
    <?php if ($this->form !== null): ?>
        <div class="row">
            <div class="col-xs-12 col-md-8 col-md-offset-2">

                <?php echo $this->form()->openTag($this->form); ?>

                <div class="form-group">
                    <div class="col-xs-12 col-md-4">
                        <?php echo $this->formRow($form->get('person_firstname')); ?>
                    </div>

                    <div class="col-xs-12 col-md-7 col-md-offset-1">
                        <?php echo $this->formRow($form->get('person_lastname')); ?>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-12 col-md-12">
                        <?php echo $this->formRow($form->get('person_gender')); ?>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-12 col-md-2">
                        <?php echo $this->formRow($form->get('person_birthday')); ?>
                    </div>
                    <div class="col-xs-12 col-md-4 col-md-offset-1">
                        <?php echo $this->formRow($form->get('person_cpf')); ?>
                    </div>
                    <div class="col-xs-12 col-md-4 col-md-offset-1">
                        <?php echo $this->formRow($form->get('person_rg')); ?>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-12 col-md-2">
                        <?php echo $this->formRow($form->get('person_phone')); ?>
                    </div>
                    <div class="col-xs-12 col-md-4 col-md-offset-1">
                        <?php echo $this->formRow($form->get('person_email')); ?>
                    </div>                    
                    <div class="col-xs-12 col-md-4 col-md-offset-1">
                        <?php echo $this->formRow($form->get('person_confirm_email')); ?>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-12 col-md-12">
                        <?php echo $this->formRow($form->get('registration_know_about')); ?>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-12 col-md-12">
                        <?php echo $this->formLabel($form->get('registration_captcha')); ?>
                    </div>
                    <div class="col-xs-12 col-md-6 col-md-offset-3 text-center">
                        <?php echo $this->formElement($form->get('registration_captcha')); ?>
                    </div>
                    <div class="col-xs-12 col-md-12">
                        <?php echo $this->formElementErrors($form->get('registration_captcha')); ?>
                    </div>
                </div>

                <div class="form-group" id="registration_consent_box">
                    <div class="col-xs-12 col-md-12">
                        <?php echo $this->formRow($form->get('registration_consent')); ?>
                    </div>
                </div>

                <br>

                <div class="form-group">
                    <?php echo $this->formRow($form->get('registation_confirm')); ?>
                </div>

            </div>

            <?php echo $this->form()->closeTag(); ?>

        </div>
    </div>
<?php endif; ?>
</section>

<script>

    var standardConfig = (function () {
        // your module code goes here
        // var config = null;

        /**
         * 
         * private functions
         */

        initDatepickers = function () {

            $('.datepicker').closest('.input-group').datetimepicker({
                format: 'DD/MM/YYYY',
                minDate: moment().subtract(100, 'years'),
                useCurrent: false,
                maxDate: moment().subtract(15, 'years'),
                locale: 'pt-br',
                viewMode: 'years',
                viewDate: moment().subtract(21, 'years')
            });
        };

        initCaptchaOperations = function () {
            $('#captcha_input-refresh').click(function () {
                $.ajax({
                    url: '/recruitment/captcha/refresh',
                    dataType: 'json',
                    success: function (data) {
                        $('#captcha_input-image').attr('src', data.src);
                        $('#captcha_input-hidden').attr('value', data.id);
                    }
                });
            });
        };

        return {
            init: function () {
                initDatepickers();
                initCaptchaOperations();
            }
        };

    }());


</script>