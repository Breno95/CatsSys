<section class="content">
    <?php
    $this->headLink()->appendStylesheet('/vendor/trumbowyg/dist/ui/trumbowyg.min.css');
    $this->headTitle()->append('Adicionar Questão')
        ->setSeparator(' - ');
    ?>
    <p><?php echo $this->message; ?></p>
    <div class="row">

        <div class="container-fluid">
            <p>Por favor, antes de inserir a questão, aguarde até que a fórmula abaixo seja exibida. 
                Caso a fórmula não apareça dentro de alguns segundos, por favor, recarregue a página.</p>
            <br>
            <h3 id="testEquation" style="display:none;" class="text-center">
                $$ e^{ix} = \cos{x} + i \sin{x}. $$
            </h3>
        </div>
        <hr>
        <?php if ($form !== null): ?>
            <div class="container-fluid">
                <div class="col-xs-12 col-md-6">
                    <h3 class="text-center">Questão</h3>
                    <?php $form->prepare(); ?>
                    <?php echo $this->form()->openTag($form); ?>
                    <div class="col-md-12">
                        <?php echo $this->formRow($form->get('exam-question')->get('subjectId')); ?>
                        <?php echo $this->formRow($form->get('exam-question')->get('examQuestionType')); ?>
                        <?php echo $this->formRow($form->get('exam-question')->get('examQuestionEnunciation')); ?>
                        <div class="hero-unit">
                            <?php echo $this->formCollection($form->get('exam-question')->get('answerOptions')); ?>
                        </div>
                        <div class="btn-group btn-group-justified" id="alternative-control-btns">
                            <div class="btn-group"><?php echo $this->formElement($form->get('addAlternative')); ?></div>
                            <div class="btn-group"><?php echo $this->formElement($form->get('removeAlternative')); ?></div>             
                        </div>
                        <br>
                    </div>
                    <div class="col-md-12">
                        <?php echo $this->formRow($form->get('submit')); ?>
                    </div>
                    <?php echo $this->form()->closeTag(); ?>
                </div>
                <div class="col-xs-12 col-md-6">
                    <h3 class="text-center">Pré-visualização</h3>
                    <div id="mathPreview" class="text-justify"></div>
                    <div id="mathBuffer"></div>
                </div>
            </div>
        <?php endif; ?>
        <div class="modal fade" id="modal-question-type" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title"><i class="fa fa-book"></i> Mudar tipo da questão </h4>
                    </div>
                    <div class="modal-body">
                        <div class="box-body table-responsive">
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <p id="change-type-text"></p>
                                    </div>
                                </div>
                            </div>
                        </div><!-- /.box-body -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> Cancelar</button>
                        <button id="btn-change-type" type="button" class="btn btn-primary"><i class="fa fa-check"></i> Mudar tipo da questão</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    appConfig = (function () {
        var scriptSrc = 'app/pages/school-management/exam/add-question';

        return {
            getScriptSrc: function () {
                return scriptSrc;
            }
        };

    })();
</script>

